## 数据管理接口

### 数据上传

> POST api/v1/data/upload

请求参数：

```python
class UploadRequest:
    files:List[str] # 文件列表
    file_types:List[str] # 文件类型 text,images
    titles:List[str] # 文件标题
```

返回结果：

```python
class UploadResponse:
    file_ids:List[str] # 文件id列表
    total_count:int # 文件总数
    success_count:int # 成功上传总数
    errors:List[str] # 上传失败信息
```

### 数据删除

> DELETE api/v1/data/delete/{doc_id}

请求参数：无

返回结果：

```python
class DeleteResponse:
    doc_id:str # 删除的文件id
    delete_chunk_count:int # 删除的chunk数量
    delete_vector_count:int # 删除的向量数量
```

### 数据更新

> PUT api/v1/data/update

请求参数：

```python
class UpdateRequest:
    doc_ids:List[str] # 要更新的文件id列表
    file_types:List[str] # 要更新的文件类型 text,images
    titles:List[str] # 要更新文件标题
```

返回结果：

```python
class UpdateResponse:
    doc_ids:List # 文件id列表
    update_count:int # 更新总数
```

## 多模态检索接口

> POST /api/v1/retrieve

请求参数：

```python
class SearchRequest:
    query:str # 文本
    query_images:List[image] # 图片base64
    top_k:int # 检索数量
    filters:List[str] # 过滤条件
```

返回结果：

```python
class SearchResponse:
    texts:List[str] # 文本
    images:List[image] # 图片
    source_texts:List[str] # 文本的来源文件
```

## 多模态问答接口

> POST api/v1/qa

请求参数：

```python
class QARequest:
    question:str # 文本
    query_images:List[image] # 图片base64
    conversation_id:str # 会话id
    temperature:float
    max_tokens:int
```

返回结果：

```python
class QAResponse:
    answer:str # 回答
    conversation_id:str # 会话id
    sources:[
    {
        doc_id:str # 来源文件id
        content: # 来源内容，文本或图片
        file_type:str # 文件类型
    },
    ]
```
